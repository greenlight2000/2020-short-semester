<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<head>
    <meta http-equiv="content-type" content="text/html; charset=gb2312" />
    <title>Home page</title>
    <meta name="keywords" content="Group57ģ��" />
    <meta name="description" content="��57��" />
    <link href="default.css" rel="stylesheet" type="text/css" />
    <script src="JS/jquery-1.8.3.js"></script>
    <script type="text/javascript" src="/JS/User01.js"></script>
    <script src="JS/template.js"></script>

</head>
<body>
<script type="text/javascript">
    var orderVoObj = [{"id":3,"orderTime":"2020-06-04","configSpecs":"{color:blue,size:small}","name":"piano1","num":1,"totalPrice":26.0,"payStatus":"paid","spuId":1,"userId":1},{"id":1,"orderTime":"2020-06-01","configSpecs":"{color:red,size:big}","name":"piano1","num":2,"totalPrice":56.0,"payStatus":"paid","spuId":1,"userId":1},{"id":4,"orderTime":"2020-07-01","configSpecs":"{color:blue,size:small}","accessory":"bag,one year guarantee repair","name":"piano1","num":1,"totalPrice":86.0,"payStatus":"paid","spuId":1,"userId":1},{"id":5,"orderTime":"2020-07-05","configSpecs":"","accessory":"","name":"Yamaha Elec. Organ","num":2,"totalPrice":400.0,"payStatus":"paid","spuId":1,"userId":1}];
    var b = "#btn";
    $(document).ready(function() {
        $(b).click(function () {
            console.log(orderVoObj);
            //创建模版实例，传入labelList数据渲染
            var html = template("tpl", {
                orderVoList: orderVoObj
            });
            //将标签的勾选模版动态注入页面
            $("#orders").html(html);

            var a = document.querySelectorAll(".dl");

            for (i = 0; i < a.length; i++) {
                a[i].onclick = function() {
                    this.parentNode.parentNode.remove();
                    delElem(this.id);
                    console.log("del id:",this.id,orderVoObj);

                }
            }

        });

    });
    var delElem = function (id) {
        for(i in orderVoObj){
            if(orderVoObj[i].id == id){
                orderVoObj.splice(i,1);
            }
        }
    }
    // var loadpage = function (jsonList) {
    //     var html = template("tpl", {
    //         orderVoList: jsonList
    //     });
    //     //将标签的勾选模版动态注入页面
    //     $("#orders").html(html);
    // };
    // var list = document.querySelectorAll(".dl");
    // console.log("len=",list.length);
    //
    //
    // for(var a in list){
    //     console.log(a);
    //     list[a].onclick = function () {
    //         orderVoObj.splice(a,1);
    //         console.log("here",a,orderVoObj);
    //         loadpage(orderVoObj);
    //     }
    // }
    // var list = document.querySelectorAll(".dl");
    // console.log("len=",list.length);
    // for(var i=0; i&lt;list.length; i++){
    //     list[i].onclick = function () {
    //         orderVoObj.splice(i+1,1);
    //         console.log("here",i,orderVoObj);
    //     }
    // }

</script>
<script id="tpl" type="text/html">
    {{each orderVoList}}
    <tr class="123">
        {{$value.labelName}}<input type="checkbox" value={{$value.labelId}} labelId={{$value.labelId}}>
        <td>{{$value.name}}</td>
        <td><img src="{{$value.picture}}" width="100" height="60"></td>
        <td>{{$value.configSpecs}}</td>
        <td>{{$value.accessory}}</td>
        <td>{{$value.totalPrice}}</td>
        <td><a href="#"><img src="images/min.png" width="20" height="20"></a>&nbsp;&nbsp;{{$value.num}}&nbsp;&nbsp;<a href="#"><img src="images/plu.png" width="20" height="20"></a></td>
        <td><a href="#" id={{$value.id}} class="dl" style="font-size: 20px">Cancel </a></td>
    </tr>
    {{/each}}
</script>

<div id="Login">
    <a href="Login.html">Login</a> |
    <a href="Register.html">Register</a>
    <a href="Home.html"><img src="images/out.png" width="30" height="25" >|</a>
    <span onmouseup="checkUserLoginCart()"><img src="images/che.png" width="30" height="25" >|</span>
    <a>Welcome</a>
    <span onMouseUp="checkUserLogin()">|<img src="images/ren.png" width="30" height="25" ></span>
</div>
<div id="menu">
    <nav>
        <ul class="level">
            <li><a href="Home.html">HOME</a></li>
            <li>
                <a href="About Us.html">ABOUT US</a>
            </li>
            <li>
                <a href="Products.html">PRODUCT</a>
            </li>
            <li><a href="Support.html">SUPPORT</a></li>
            <li><a href="Contact Us.html">CONTACT US</a></li>
        </ul>
    </nav>
</div>
<div id="header">
    <h1><a>Music</a></h1>
    <h2><a>by group57</a></h2>
</div>

<div id="cart">
    <table class="mt" style="margin: auto">
        <thead>
        <tr>
            <td>Name</td>
            <td>Picture</td>
            <td>Configuration</td>
            <td>Accessory</td>
            <td>Price</td>
            <td>Number</td>
            <td>Operation</td>
        </tr>
        </thead>
        <tbody id="orders">

        </tbody>
    </table>
    <br><br><br><br>
    <a href="#" style="padding-left: 350px"><button style="font-size: 20px" id="backProduct">Back To Products </button></a>
    <a href="#" style="padding-left: 100px"><button style="font-size: 20px" id="generateOrder">Generate an order </button></a>

</div>
<div>
    <button id="btn" name="btn"></button>
</div>
</body>
</html>
